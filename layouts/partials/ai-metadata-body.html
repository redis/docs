{{- /* Generate AI-friendly metadata as a hidden div in the page body */ -}}
{{- $metadata := dict "title" .Title "description" .Description "categories" .Params.categories -}}
{{- if .Params.arguments -}}
  {{- $metadata = merge $metadata (dict "arguments" .Params.arguments) -}}
{{- end -}}
{{- if .Params.syntax_fmt -}}
  {{- $metadata = merge $metadata (dict "syntax_fmt" .Params.syntax_fmt) -}}
{{- end -}}
{{- if .Params.complexity -}}
  {{- $metadata = merge $metadata (dict "complexity" .Params.complexity) -}}
{{- end -}}
{{- if .Params.group -}}
  {{- $metadata = merge $metadata (dict "group" .Params.group) -}}
{{- end -}}
{{- if .Params.command_flags -}}
  {{- $metadata = merge $metadata (dict "command_flags" .Params.command_flags) -}}
{{- end -}}
{{- if .Params.acl_categories -}}
  {{- $metadata = merge $metadata (dict "acl_categories" .Params.acl_categories) -}}
{{- end -}}
{{- if .Params.since -}}
  {{- $metadata = merge $metadata (dict "since" .Params.since) -}}
{{- end -}}
{{- if .Params.arity -}}
  {{- $metadata = merge $metadata (dict "arity" .Params.arity) -}}
{{- end -}}
{{- if .Params.key_specs -}}
  {{- $metadata = merge $metadata (dict "key_specs" .Params.key_specs) -}}
{{- end -}}
{{- if .Params.topics -}}
  {{- $metadata = merge $metadata (dict "topics" .Params.topics) -}}
{{- end -}}
{{- if .Params.relatedPages -}}
  {{- $metadata = merge $metadata (dict "relatedPages" .Params.relatedPages) -}}
{{- end -}}
{{- if .Params.scope -}}
  {{- $metadata = merge $metadata (dict "scope" .Params.scope) -}}
{{- end -}}
{{- $json := $metadata | jsonify -}}
{{- printf `<div hidden data-redis-metadata="page">%s</div>` $json | safeHTML -}}

