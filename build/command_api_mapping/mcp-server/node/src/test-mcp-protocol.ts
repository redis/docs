#!/usr/bin/env node\n\n/**\n * Test MCP Protocol Communication\n * \n * This script tests the actual MCP protocol communication by:\n * 1. Starting the server\n * 2. Sending a ListTools request\n * 3. Checking the response\n */\n\nimport { spawn } from \"child_process\";\nimport * as path from \"path\";\nimport { fileURLToPath } from \"url\";\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\nasync function testMCPProtocol() {\n  console.log(\"ðŸ§ª Testing MCP Protocol Communication...\\n\");\n\n  // Start the server\n  const serverProcess = spawn(\"node\", [\"dist/index.js\"], {\n    cwd: path.join(__dirname, \"..\"),\n    stdio: [\"pipe\", \"pipe\", \"pipe\"],\n  });\n\n  let serverOutput = \"\";\n  let serverError = \"\";\n\n  serverProcess.stdout.on(\"data\", (data) => {\n    serverOutput += data.toString();\n    console.log(\"[SERVER STDOUT]\", data.toString());\n  });\n\n  serverProcess.stderr.on(\"data\", (data) => {\n    serverError += data.toString();\n    console.log(\"[SERVER STDERR]\", data.toString());\n  });\n\n  // Wait for server to start\n  await new Promise((resolve) => setTimeout(resolve, 1000));\n\n  // Send a ListTools request\n  const request = {\n    jsonrpc: \"2.0\",\n    id: 1,\n    method: \"tools/list\",\n    params: {},\n  };\n\n  console.log(\"\\nðŸ“¤ Sending request:\", JSON.stringify(request));\n  serverProcess.stdin.write(JSON.stringify(request) + \"\\n\");\n\n  // Wait for response\n  await new Promise((resolve) => setTimeout(resolve, 2000));\n\n  // Kill the server\n  serverProcess.kill();\n\n  console.log(\"\\nâœ… Test completed\");\n  console.log(\"Server output:\", serverOutput);\n  console.log(\"Server error:\", serverError);\n}\n\ntestMCPProtocol().catch(console.error);\n
