{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://redis.io/schemas/page-metadata.json",
  "title": "Redis Page Metadata",
  "description": "Schema for AI-friendly metadata embedded in Redis documentation pages",
  "type": "object",
  "required": ["title", "description"],
  "properties": {
    "title": {
      "type": "string",
      "description": "The page title"
    },
    "description": {
      "type": "string",
      "description": "A brief description of the page content"
    },
    "categories": {
      "type": "array",
      "description": "Array of category tags for the page",
      "items": {
        "type": "string"
      }
    },
    "tableOfContents": {
      "$ref": "#/definitions/tableOfContents"
    },
    "arguments": {
      "type": "array",
      "description": "Command arguments (for command reference pages)"
    },
    "syntax_fmt": {
      "type": "string",
      "description": "Command syntax format (for command reference pages)"
    },
    "complexity": {
      "type": "string",
      "description": "Time complexity of the command (for command reference pages)"
    },
    "group": {
      "type": "string",
      "description": "Command group (for command reference pages)"
    },
    "command_flags": {
      "type": "array",
      "description": "Flags associated with the command (for command reference pages)"
    },
    "acl_categories": {
      "type": "array",
      "description": "ACL categories for the command (for command reference pages)"
    },
    "since": {
      "type": "string",
      "description": "Redis version when the command was introduced (for command reference pages)"
    },
    "arity": {
      "type": "integer",
      "description": "Number of arguments the command accepts (for command reference pages)"
    },
    "key_specs": {
      "type": "array",
      "description": "Key specifications for the command (for command reference pages)"
    },
    "topics": {
      "type": "array",
      "description": "Related topics"
    },
    "relatedPages": {
      "type": "array",
      "description": "Links to related documentation pages"
    },
    "scope": {
      "type": "string",
      "description": "Scope or domain of the page content"
    },
    "location": {
      "type": "string",
      "enum": ["head", "body"],
      "description": "Where this metadata is located in the HTML document. 'head' indicates it's in a <script> tag in the document head. 'body' indicates it's in a hidden <div> in the document body."
    },
    "duplicateOf": {
      "type": "string",
      "description": "If this metadata is a duplicate of another instance, this field indicates the location of the primary copy. Format: 'location:selector' (e.g., 'head:data-ai-metadata'). Only present in duplicate instances."
    },
    "codeExamples": {
      "type": "array",
      "description": "Array of code examples found on the page",
      "items": {
        "$ref": "#/definitions/codeExample"
      }
    }
  },
  "definitions": {
    "codeExample": {
      "type": "object",
      "description": "A code example with language-specific variants",
      "required": ["id"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the code example"
        },
        "description": {
          "type": "string",
          "description": "Description of what the code example demonstrates"
        },
        "difficulty": {
          "type": "string",
          "enum": ["beginner", "intermediate", "advanced"],
          "description": "Difficulty level of the example"
        },
        "codetabsId": {
          "type": "string",
          "description": "DOM element ID of the codetabs container"
        },
        "languages": {
          "type": "array",
          "description": "Array of language-specific code variants",
          "items": {
            "$ref": "#/definitions/languageVariant"
          }
        }
      }
    },
    "languageVariant": {
      "type": "object",
      "description": "A language-specific variant of a code example",
      "required": ["id", "panelId"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Display name of the language (e.g., 'Python', 'Node.js', 'Java-Sync')"
        },
        "panelId": {
          "type": "string",
          "description": "DOM element ID of the code panel for this language"
        },
        "langId": {
          "type": "string",
          "description": "Stable language identifier (e.g., 'python', 'javascript', 'java')"
        },
        "clientId": {
          "type": "string",
          "description": "Stable client library identifier (e.g., 'redis-py', 'node-redis', 'lettuce')"
        },
        "clientName": {
          "type": "string",
          "description": "Human-readable client library name (e.g., 'redis-py', 'Jedis', 'Lettuce')"
        }
      }
    },
    "tableOfContents": {
      "type": "object",
      "description": "Hierarchical table of contents for the page",
      "required": ["sections"],
      "properties": {
        "sections": {
          "type": "array",
          "description": "Array of top-level sections",
          "items": {
            "$ref": "#/definitions/section"
          }
        }
      }
    },
    "section": {
      "type": "object",
      "description": "A section in the table of contents",
      "required": ["id", "title"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the section (matches the heading anchor ID)"
        },
        "title": {
          "type": "string",
          "description": "Display title of the section"
        },
        "children": {
          "type": "array",
          "description": "Nested subsections",
          "items": {
            "$ref": "#/definitions/section"
          }
        }
      }
    }
  }
}

